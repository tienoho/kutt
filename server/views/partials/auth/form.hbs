<form id="login-signup" hx-post="/api/auth/login" hx-swap="outerHTML">
  {{#unless disallow_login_form}}
    <label class="{{#if errors.email}}error{{/if}}">
      {{t "common.email"}}:
      <input
        name="email"
        id="email"
        type="email"
        autofocus="true"
        placeholder="{{t "common.email_placeholder"}}"
        hx-preserve="true"
      />
      {{#if errors.email}}<p class="error">{{errors.email}}</p>{{/if}}
    </label>
    <label class="{{#if errors.password}}error{{/if}}">
      {{t "common.password"}}:
      <input
        name="password"
        id="password"
        type="password"
        placeholder="{{t "common.password_placeholder"}}"
        hx-preserve="true"
      />
      {{#if errors.password}}<p class="error">{{errors.password}}</p>{{/if}}
    </label>
    <div class="buttons-wrapper">
      <button 
        type="submit" 
        class="primary login {{#if disallow_registration}}full{{else}}{{#unless mail_enabled}}full{{/unless}}{{/if}}"
      >
        <span>{{> icons/login}}</span>
        <span>{{> icons/spinner}}</span>
        {{t "auth.login"}}
      </button>
      {{#unless disallow_registration}}
        {{#if mail_enabled}}
          <button 
            type="button"
            class="secondary signup" 
            hx-post="/api/auth/signup" 
            hx-target="#login-signup" 
            hx-trigger="click" 
            hx-indicator="#login-signup" 
            hx-swap="outerHTML"
            hx-sync="closest form"
            hx-on:htmx:before-request="htmx.addClass('#login-signup', 'signup')"
            hx-on:htmx:after-request="htmx.removeClass('#login-signup', 'signup')"
          >
              <span>{{> icons/new_user}}</span>
              <span>{{> icons/spinner}}</span>
              {{t "auth.signup"}}
          </button>
        {{/if}}
      {{/unless}}
    </div>
  {{/unless}}
  {{#if oidc_enabled}}
    <div class="buttons-wrapper">
      <a class="button secondary full" href="/login/oidc" title="{{t "auth.oidc_login"}}">
        <span>{{> icons/key}}</span>
        {{t "auth.oidc_login"}}
      </a>
    </div>
  {{/if}}
  {{#unless disallow_login_form}}
    {{#if mail_enabled}}
      <a class="forgot-password" href="/reset-password" title="{{t "auth.forgot_password"}}">{{t "auth.forgot_password"}}</a>
    {{/if}}
  {{/unless}}
  {{#unless errors}}
    {{#if error}}
      <p class="error">{{error}}</p>
    {{/if}}
  {{/unless}}
</form>
