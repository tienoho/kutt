<section id="apikey-wrapper">
  <h2>{{t "settings.api"}}</h2>
  <p>
    {{t "settings.api_description"}}
    <a href="https://docs.kutt.it" title="{{t "settings.api_docs"}}" target="_blank">
      {{t "settings.read_api_docs"}}
    </a>
  </p>
  <div id="apikey">
    {{#if user.apikey}}
      <div class="clipboard small">
        <button 
          type="button"
          aria-label="{{t "common.copy"}}" 
          hx-on:click="handleShortURLCopyLink(this);" 
          data-url="{{user.apikey}}"
        >
        {{> icons/copy}}
        </button>
        {{> icons/check}}
      </div>
      <p 
        hx-on:click="handleShortURLCopyLink(this);" 
        data-url="{{user.apikey}}"
      >
        {{user.apikey}}
      </p>
    {{/if}}
    {{#if error}}
      <p class="error">{{error}}</p>
    {{/if}}
  </div>
  <form 
    hx-post="/api/auth/apikey"
    id="generate-apikey" 
    hx-target="#apikey-wrapper" 
    hx-swap="outerHTML"
  >
    <button type="submit" class="secondary">
      <span>{{> icons/zap}}</span>
      <span>{{> icons/spinner}}</span>
      {{#if user.apikey}}{{t "settings.regenerate_key"}}{{else}}{{t "settings.generate_key"}}{{/if}}
    </button>
  </form>
</section>
