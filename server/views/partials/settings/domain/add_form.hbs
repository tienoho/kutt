<form 
  id="add-domain"
  hx-post="/api/domains"
  hx-sync="this:abort"
  hx-swap="outerHTML"
  hx-on::after-request="
    document.querySelector('.show-domain-form').classList.remove('hidden');
    document.querySelector('#add-domain').remove();
  "
>
  <div class="inputs">
    <label class="{{#if errors.address}}error{{/if}}">
      {{t "common.address"}}:
      <input 
        id="address" 
        name="address" 
        type="text" 
        placeholder="yoursite.com" 
        required="true" 
        hx-preserve="true" 

      />
      {{#if errors.address}}<p class="error">{{errors.address}}</p>{{/if}}
    </label>
    <label class="{{#if errors.homepage}}error{{/if}}">
      {{t "common.homepage"}} ({{t "common.optional"}}):
      <input 
        id="homepage" 
        name="homepage" 
        placeholder="{{t "settings.homepage_url"}}" 
        type="text" 
        hx-preserve="true" 

      />
      {{#if errors.homepage}}<p class="error">{{errors.homepage}}</p>{{/if}}
    </label>
  </div>
  <p>
    <small>
      {{t "settings.homepage_redirect_note" default=default_domain}}
    </small>
  </p>
  <div class="buttons-wrapper">
    <button type="button" onclick="
      document.querySelector('.show-domain-form').classList.remove('hidden');
      document.querySelector('#add-domain').remove();
    ">
      {{t "common.cancel"}}
    </button>
    <button type="submit" class="primary">
      <span>{{> icons/plus}}</span>
      {{t "settings.add_domain"}}
    </button>
  </div>
  {{> icons/spinner}}
  {{#unless errors}}
    {{#if error}}
      <p class="error">{{error}}</p>
    {{/if}}
  {{/unless}}
</form>
